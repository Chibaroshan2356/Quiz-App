@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply border-gray-200;
  }
  
  body {
    @apply bg-gray-50 text-gray-900 font-sans;
    font-feature-settings: "liga" 1, "kern" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /* Classic airy background */
    background-image:
      radial-gradient(1200px 600px at 10% -10%, rgba(99, 102, 241, 0.08), transparent 60%),
      radial-gradient(900px 500px at 110% 10%, rgba(59, 130, 246, 0.08), transparent 55%),
      radial-gradient(800px 500px at 50% 120%, rgba(6, 182, 212, 0.08), transparent 55%),
      linear-gradient(180deg, rgba(248, 250, 252, 1), rgba(249, 250, 251, 1));
    background-attachment: fixed;
  }

  .dark body {
    background-image:
      radial-gradient(1200px 600px at 10% -10%, rgba(99, 102, 241, 0.18), transparent 60%),
      radial-gradient(900px 500px at 110% 10%, rgba(59, 130, 246, 0.16), transparent 55%),
      radial-gradient(800px 500px at 50% 120%, rgba(6, 182, 212, 0.16), transparent 55%),
      linear-gradient(180deg, #0b1220, #0f172a);
  }
  
  h1, h2, h3, h4, h5, h6 {
    @apply font-semibold tracking-tight;
  }

  h1 { font-family: 'Playfair Display', 'Noto Serif JP', serif; }
  h2, h3 { font-family: 'Playfair Display', 'Noto Serif JP', serif; }
  .kicker { @apply uppercase tracking-widest text-xs text-gray-500; letter-spacing: .18em; }

  /* Brand gradient text */
  .brand-gradient { background: linear-gradient(90deg, #8b5cf6, #ec4899, #f59e0b); -webkit-background-clip: text; background-clip: text; color: transparent; }

  /* Navbar surface color */
  .navbar-surface {
    background: linear-gradient(135deg, #ffffff, #f8fafc);
    border-bottom: 1px solid rgba(2, 6, 23, 0.06);
    backdrop-filter: saturate(140%) blur(8px);
    -webkit-backdrop-filter: saturate(140%) blur(8px);
  }
  .dark .navbar-surface {
    background: rgba(2, 6, 23, 0.8);
    border-bottom-color: rgba(255, 255, 255, 0.08);
  }

  /* Dark theme overrides for common text utilities */
  .dark .text-gray-900 { color: #e5e7eb !important; }
  .dark .text-gray-700 { color: #cbd5e1 !important; }
  .dark .text-gray-600 { color: #94a3b8 !important; }
  .dark .text-gray-500 { color: #8aa0b5 !important; }
  .dark .bg-gray-50 { background-color: rgba(255,255,255,0.03) !important; }
  .dark .border-gray-200 { border-color: rgba(255,255,255,0.08) !important; }
  .dark .border-gray-300 { border-color: rgba(255,255,255,0.12) !important; }
  .dark .surface { color: #f3f4f6; }
  .dark .surface .text-gray-900 { color: #f9fafb !important; }
  .dark .surface .text-gray-700 { color: #f1f5f9 !important; }
  .dark .surface .text-gray-600 { color: #e5e7eb !important; }

  /* Hero decorative blob */
  .hero-blob {
    position: absolute; inset: 0; pointer-events: none; z-index: -1;
    background:
      radial-gradient(600px 300px at 20% 20%, rgba(99,102,241,.28), transparent 60%),
      radial-gradient(500px 260px at 80% 30%, rgba(236,72,153,.25), transparent 60%),
      radial-gradient(400px 240px at 50% 80%, rgba(16,185,129,.25), transparent 60%);
    filter: blur(20px) saturate(115%);
  }
}

@layer components {
  .btn {
    @apply px-5 py-2.5 rounded-full font-medium transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2;
  }
  
  .btn-primary {
    @apply bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500;
  }
  
  .btn-secondary {
    @apply bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500;
  }
  
  .btn-danger {
    @apply bg-red-600 text-white hover:bg-red-700 focus:ring-red-500;
  }
  
  .btn-success {
    @apply bg-green-600 text-white hover:bg-green-700 focus:ring-green-500;
  }
  
  .btn-outline {
    @apply border-2 border-primary-600 text-primary-600 hover:bg-primary-600 hover:text-white focus:ring-primary-500;
  }
  
  .input {
    @apply w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent;
  }
  
  .card {
    @apply bg-white rounded-2xl shadow-sm border border-gray-100 p-6;
    box-shadow: 0 10px 30px rgba(2, 6, 23, 0.03);
  }
  
  .card-hover {
    @apply card hover:shadow-md transition-shadow duration-200;
  }
  
  .quiz-card {
    @apply card-hover cursor-pointer transform hover:scale-105 transition-transform duration-200;
  }
  
  .question-card {
    @apply card;
    border-left: 6px solid theme('colors.primary.500');
  }
  
  .option-button {
    @apply w-full p-4 text-left border border-gray-200 rounded-xl hover:border-gray-300 transition-colors duration-200 cursor-pointer pointer-events-auto select-none;
    background: linear-gradient(180deg, #ffffff, #f8fafc);
  }
  .dark .option-button { background: linear-gradient(180deg, rgba(17,24,39,0.7), rgba(31,41,55,0.7)); border-color: rgba(255,255,255,0.16); }
  .dark .option-selected { background: linear-gradient(180deg, rgba(30,58,138,0.6), rgba(30,64,175,0.6)); border-color: #93c5fd; }
  
  .option-selected {
    @apply border-primary-500;
    background: linear-gradient(180deg, #eef2ff, #e0e7ff);
  }
  
  .option-correct {
    @apply border-green-500 bg-green-50 text-green-800;
  }
  
  .option-incorrect {
    @apply border-red-500 bg-red-50 text-red-800;
  }
  
  .timer {
    @apply inline-flex items-center px-3 py-1 rounded-full text-sm font-medium;
    box-shadow: inset 0 0 0 1px rgba(0,0,0,0.04);
  }
  
  .timer-normal {
    @apply bg-blue-100 text-blue-800;
  }
  
  .timer-warning {
    @apply bg-yellow-100 text-yellow-800;
  }
  
  .timer-danger {
    @apply bg-red-100 text-red-800;
  }
  
  .progress-bar {
    @apply w-full bg-gray-200 rounded-full h-2;
  }
  
  .progress-fill {
    @apply bg-primary-600 h-2 rounded-full transition-all duration-300;
  }
  
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }
  
  .badge-easy {
    @apply text-white shadow-sm;
    background: linear-gradient(135deg, #10b981, #22c55e);
    box-shadow: 0 6px 16px rgba(16, 185, 129, 0.25);
  }
  
  .badge-medium {
    @apply text-white shadow-sm;
    background: linear-gradient(135deg, #f59e0b, #f97316);
    box-shadow: 0 6px 16px rgba(249, 115, 22, 0.25);
  }
  
  .badge-hard {
    @apply text-white shadow-sm;
    background: linear-gradient(135deg, #ef4444, #f43f5e);
    box-shadow: 0 6px 16px rgba(244, 63, 94, 0.25);
  }

  /* Vibrant card accent strip per difficulty */
  .card-accent { position: relative; overflow: hidden; }
  .card-accent::before {
    content: "";
    position: absolute;
    top: 0; left: 0; right: 0; height: 6px;
  }
  .card-accent-easy::before { background: linear-gradient(90deg, #34d399, #22c55e, #06b6d4); }
  .card-accent-medium::before { background: linear-gradient(90deg, #f59e0b, #f97316, #ef4444); }
  .card-accent-hard::before { background: linear-gradient(90deg, #ef4444, #f43f5e, #8b5cf6); }

  /* Section shell inspired by airy editorial layout */
  .section {
    @apply max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12;
  }
  .section-header {
    @apply mb-8;
  }
  .section-title {
    @apply text-3xl sm:text-4xl font-semibold;
  }
  .section-subtitle {
    @apply text-gray-600 mt-2;
  }
  
  .loading-spinner {
    @apply animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600;
  }
  
  .fade-in {
    @apply animate-fade-in;
  }
  
  .slide-up {
    @apply animate-slide-up;
  }
  
  .bounce-in {
    @apply animate-bounce-in;
  }
}

@layer utilities {
  /* Design tokens */
  :root {
    --surface: rgba(255,255,255,0.75);
    --surface-border: rgba(15, 23, 42, 0.06);
    --glass: rgba(255,255,255,0.6);
    --glass-dark: rgba(15, 23, 42, 0.6);
    --shadow-lg: 0 10px 40px rgba(2, 6, 23, 0.12);
    --radius: 16px;
  }
  .dark :root {
    --surface: rgba(2,6,23,0.65);
    --surface-border: rgba(255,255,255,0.08);
    --glass: rgba(2,6,23,0.55);
  }

  /* Glass surface */
  .surface {
    background: var(--surface);
    backdrop-filter: saturate(140%) blur(12px);
    -webkit-backdrop-filter: saturate(140%) blur(12px);
    border: 1px solid var(--surface-border);
    border-radius: var(--radius);
    box-shadow: var(--shadow-lg);
  }

  /* Gradient button backgrounds */
  .btn-gradient {
    background-image: linear-gradient(135deg, #6366f1, #3b82f6 45%, #06b6d4);
    color: #fff;
  }
  .btn-gradient:hover { filter: brightness(0.98) saturate(1.05); }

  /* Outline glass button */
  .btn-glass {
    background: var(--glass);
    border: 1px solid var(--surface-border);
    color: #0f172a;
  }
  .dark .btn-glass { background: var(--glass-dark); color: #e2e8f0; }

  /* Fancy headings */
  .display {
    font-family: 'Playfair Display', 'Noto Serif JP', serif;
    letter-spacing: -0.02em;
  }

  /* Elevated card */
  .elevated {
    box-shadow: var(--shadow-lg);
    border-radius: var(--radius);
  }

  .text-gradient {
    @apply bg-gradient-to-r from-primary-600 to-purple-600 bg-clip-text text-transparent;
  }
  
  .shadow-glow {
    box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
  }
  
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
}
